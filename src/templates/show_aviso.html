{% extends "base.html" %}
{% block content %}
<!-- Bootstrap Core CSS -->
<link href="../static/css/bootstrap.min.css" rel="stylesheet">
<link href="../static/css/style.css" rel="stylesheet">

 <!-- Custom CSS -->
<link href="../static/css/thumbnail-gallery.css" rel="stylesheet">


<div class="row">
    <div class="col-lg-12 text-center">
        <h1>Ver Aviso <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></h1>
    </div>
</div>
<br/>
<br/>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-8">
    <div class="form-horizontal" > 
    <div class="control-group">
        <label for="street" class="control-label col-sm-2">Calle</label>
        <div class="controls col-sm-10">
            <p id="street" class="form-control-static">{{aviso.calle}}</p>
        </div>
    </div>
    <div class="control-group">
        <label for="number" class="control-label col-sm-2">Número</label>
        <div class="controls col-sm-10">
            <p id="number" class="form-control-static">{{aviso.numero}}</p>
        </div>
    </div>    
    <div class="control-group">
        <label for="zip" class="control-label col-sm-2">Código postal</label>
        <div class="controls col-sm-10">
            <p id="zip" class="form-control-static">{{aviso.cod_postal}}</p>
        </div>
    </div>
    <div class="control-group">
        <label for="email" class="control-label col-sm-2">Email creador</label>
        <div class="controls col-sm-10">
            <p id="email" class="form-control-static">{{aviso.email}}</p>
        </div>
    </div>
    <div class="control-group">
        <label for="description" class="control-label col-sm-2">Descripcion</label>
        <div class="controls col-sm-10">
            <p id="description" class="form-control-static">{{aviso.descripcion}}</p>
        </div>
    </div>
    <div class="control-group">
        <label for="tag" class="control-label col-sm-2">Tag</label>
        <div class="controls col-sm-10">
            <p id="tag" class="form-control-static">{{aviso.tag}}</p>
        </div>
    </div>
    <div class="control-group text-center">
    <a class="btn btn-warning" href="/listOperaciones/{{ aviso.key().id() }}">Ver Operaciones</a>
                <a class="btn btn-warning" href="/createOperacion/{{ aviso.key().id() }}">Añadir Operacion</a>
            </div>
</div>
    </div>
    <div>
    	<div id="map-container"  style="width:100%;height:25em;"></div>
    	<!--TODO Insert you key for run map ;) Generated by SecurityExportToGithub.kt -->
    	<script src="https://maps.googleapis.com/maps/api/js?key=INSERT_YOU_KEY"
  		type="text/javascript"></script>
    	<script type="text/javascript">
        google.maps.event.addDomListener(window, 'load', init_map);
        
        function init_map() {
        			var location = "{{address}}";
		    		var userLocation = location;
		            var geocoder = new google.maps.Geocoder();
		            var lat;
		            var lng;
		            var place;
		            geocoder.geocode({
		                address: userLocation
		            }, function(locResult) {
		                console.log(locResult);
		                lat = locResult[0].geometry.location.lat();
		                lng = locResult[0].geometry.location.lng();
		                load_map();
		            });
		            
    		function load_map(){
                    var latitude = parseFloat(lat);
                    var longitude = parseFloat(lng);
                   
                    var latlngPos = new google.maps.LatLng(latitude, longitude);
                      // Set up options for the Google map
                      var myOptions = {
                      zoom: 15,
                      center: latlngPos,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                      };
                      
                      // Define the map
                      map = new google.maps.Map(document.getElementById("map-container"), myOptions);
                      
                      var var_marker = new google.maps.Marker({
                			position: latlngPos,
                			map: map,
                			title:'Aviso'});
                      
                      
                      var_marker.setMap(map);	
                     /* data.forEach(function(p) { // siendo data un JSON
                          var point = new google.maps.LatLng(p.lat, p.lng);
                          var marker = new google.maps.Marker({position: point,
                                            map: map,
                                            title: p.name
                                            });

                             })*/
    		} 
                     }
    	</script>   
    </div>

    <div class="container">

        <div class="row">

            <div class="col-lg-12">
                <h1 class="page-header">Fotografías adjuntas aviso</h1>
            </div>
            
            {% for photo in respuesta %}
            <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                <a class="thumbnail" href="#">
                    <img class="img-responsive" src="http://farm{{photo['farm']}}.staticflickr.com/{{photo['server']}}/{{photo['id']}}_{{photo['secret']}}_z.jpg" alt="">
                </a>
            </div>
            {% endfor %}
</div>
</div>
<script>
function generarGaleria(){
    //alert('{{respuesta}}'); For Debug Json request
}

generarGaleria();
</script>
<script src="../static/js/jquery.js"></script>
<script src="../static/js/bootstrap.min.js"></script>

{% endblock content %}
